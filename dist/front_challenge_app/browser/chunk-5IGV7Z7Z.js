import{a as R}from"./chunk-7BEG44RO.js";import{$ as u,A as f,B as g,D as v,F as l,G as w,H as h,O as S,Q as C,U as F,V as E,X as y,Y as I,Z as L,_ as M,aa as T,ba as k,ca as D,da as N,ea as j,ga as P,ha as A,j as a,k as p,l as b,m,o as c,t as s,u as n,v as t,w as d}from"./chunk-DIR3CT2O.js";function q(i,o){i&1&&(n(0,"span"),l(1,"El correo electr\xF3nico es requerido"),t())}function G(i,o){i&1&&(n(0,"span"),l(1,"Formato de correo electr\xF3nico inv\xE1lido"),t())}function V(i,o){if(i&1&&(n(0,"div",24),m(1,q,2,0,"span",21)(2,G,2,0,"span",21),t()),i&2){let r=g();a(),s("ngIf",r.email==null||r.email.errors==null?null:r.email.errors.required),a(),s("ngIf",r.email==null||r.email.errors==null?null:r.email.errors.email)}}function B(i,o){i&1&&(n(0,"span"),l(1,"La contrase\xF1a es requerida"),t())}function O(i,o){i&1&&(n(0,"span"),l(1,"La contrase\xF1a debe tener al menos 6 caracteres"),t())}function H(i,o){if(i&1&&(n(0,"div",25),m(1,B,2,0,"span",21)(2,O,2,0,"span",21),t()),i&2){let r=g();a(),s("ngIf",r.password==null||r.password.errors==null?null:r.password.errors.required),a(),s("ngIf",r.password==null||r.password.errors==null?null:r.password.errors.minlength)}}function z(i,o){i&1&&(n(0,"span"),l(1,"Iniciar Sesi\xF3n"),t())}function J(i,o){i&1&&(n(0,"span"),l(1,"Cargando..."),t())}function K(i,o){if(i&1&&(n(0,"div",26),l(1),t()),i&2){let r=g();a(),h(" ",r.errorMessage," ")}}var x=class i{constructor(o,r,e,_){this.fb=o;this.ApiService=r;this.mensajeService=e;this.router=_;this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]],rememberMe:[!1]})}loginForm;showPassword=!1;isLoading=!1;errorMessage="";ngOnInit(){}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){this.loginForm.valid?(this.isLoading=!0,this.errorMessage="",this.ApiService.login(this.loginForm.value).subscribe({next:o=>{this.isLoading=!1,console.log("Login exitoso",o),this.router.navigate(["/dashboard"])},error:o=>{this.isLoading=!1,console.error("Error en login",o),this.errorMessage=o.message||"Error al iniciar sesi\xF3n. Int\xE9ntalo de nuevo.",this.mensajeService.mostrarMensaje({type:"error",title:"Error de login",message:this.errorMessage,duration:5e3,showButton:!0}).subscribe()}})):Object.keys(this.loginForm.controls).forEach(o=>{this.loginForm.get(o)?.markAsTouched()})}static \u0275fac=function(r){return new(r||i)(p(P),p(I),p(R),p(F))};static \u0275cmp=b({type:i,selectors:[["app-login"]],decls:38,vars:16,consts:[[1,"login-container"],[1,"login-image-container"],["src","angularlogo.png","alt","Angular logo"],[1,"login-card"],[1,"login-title"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","aria-describedby","email-error",1,"form-input"],["class","error-message","id","email-error",4,"ngIf"],["for","password",1,"form-label"],[1,"password-container"],["id","password","formControlName","password","aria-describedby","password-error",1,"form-input",3,"type"],["type","button",1,"toggle-password",3,"click"],[1,"icon"],["class","error-message","id","password-error",4,"ngIf"],[1,"form-options"],[1,"checkbox-container"],["type","checkbox","formControlName","rememberMe"],[1,"checkmark"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],["routerLink","/register"],["class","error-message general-error",4,"ngIf"],["id","email-error",1,"error-message"],["id","password-error",1,"error-message"],[1,"error-message","general-error"]],template:function(r,e){r&1&&(n(0,"div",0)(1,"div",1),d(2,"img",2),t(),n(3,"div",3)(4,"h2",4),l(5,"Iniciar Sesi\xF3n"),t(),n(6,"form",5),f("ngSubmit",function(){return e.onSubmit()}),n(7,"div",6)(8,"label",7),l(9,"Correo electr\xF3nico"),t(),d(10,"input",8),m(11,V,3,2,"div",9),t(),n(12,"div",6)(13,"label",10),l(14,"Contrase\xF1a"),t(),n(15,"div",11),d(16,"input",12),n(17,"button",13),f("click",function(){return e.togglePasswordVisibility()}),n(18,"span",14),l(19),t()()(),m(20,H,3,2,"div",15),t(),n(21,"div",16)(22,"label",17),d(23,"input",18)(24,"span",19),l(25," Recu\xE9rdame "),t()(),n(26,"button",20),m(27,z,2,0,"span",21)(28,J,2,0,"span",21),t()(),d(29,"br"),n(30,"div",16)(31,"label",17),d(32,"span",19),l(33," \xBFNo cuentas con una cuenta? "),n(34,"a",22)(35,"strong"),l(36,"Reg\xEDstrate"),t()()()(),m(37,K,2,1,"div",23),t()()),r&2&&(a(6),s("formGroup",e.loginForm),a(4),v("invalid",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),c("aria-invalid",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(),s("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(5),v("invalid",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),s("type",e.showPassword?"text":"password"),c("aria-invalid",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),c("aria-label",e.showPassword?"Ocultar contrase\xF1a":"Mostrar contrase\xF1a"),a(2),w(e.showPassword?"\u{1F648}":"\u{1F441}\uFE0F"),a(),s("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(6),s("disabled",e.loginForm.invalid||e.isLoading),a(),s("ngIf",!e.isLoading),a(),s("ngIf",e.isLoading),a(9),s("ngIf",e.errorMessage))},dependencies:[C,S,A,D,M,L,T,k,N,j,y,E],encapsulation:2})};export{x as LoginComponent};
