import{$ as y,A as s,B as m,D as k,F as n,G as g,H as _,I as S,J as T,K as D,L as I,P as V,Q as z,U as A,Y as N,_ as G,aa as j,ba as q,ca as B,da as $,ea as R,f as u,fa as H,g as h,ga as L,h as v,ha as Y,i as M,j as r,k as C,l as E,o as P,p,q as f,r as w,s as F,t as c,u as i,v as e,w as b,z as O}from"./chunk-DIR3CT2O.js";var U=(l,o)=>o.id;function J(l,o){l&1&&(i(0,"div",13),n(1,"El t\xEDtulo es requerido"),e())}function K(l,o){l&1&&(i(0,"p"),n(1,"\xA1Comienza agregando una nueva tarea!"),e())}function W(l,o){if(l&1&&(i(0,"div",29)(1,"p"),n(2),e(),p(3,K,2,0,"p"),e()),l&2){let t=m();r(2),_("No hay tareas ",t.currentFilter!=="all"?t.currentFilter:""),r(),f(t.currentFilter==="all"?3:-1)}}function X(l,o){if(l&1&&(i(0,"p",40),n(1),e()),l&2){let t=m().$implicit;r(),g(t.description)}}function Z(l,o){if(l&1){let t=O();i(0,"div",33)(1,"div",34)(2,"input",35),s("change",function(){let d=u(t).$implicit,x=m();return h(x.toggleTask(d.id))}),e(),i(3,"label",36)(4,"span",37),n(5),e()()(),i(6,"div",38)(7,"h3",39),n(8),e(),p(9,X,2,1,"p",40),i(10,"div",41)(11,"span",42),n(12),D(13,"date"),e(),i(14,"span",43),n(15),e()()(),i(16,"div",44)(17,"button",45),s("click",function(){let d=u(t).$implicit,x=m();return h(x.editTask(d))}),v(),i(18,"svg",46),b(19,"path",47)(20,"path",48),e(),M(),i(21,"span",37),n(22),e()(),i(23,"button",49),s("click",function(){let d=u(t).$implicit,x=m();return h(x.deleteTask(d.id))}),v(),i(24,"svg",46),b(25,"path",50)(26,"path",51),e(),M(),i(27,"span",37),n(28),e()()()()}if(l&2){let t=o.$implicit;k("task-completed",t.completed),r(2),c("id","task-"+t.id)("checked",t.completed),P("aria-label","Marcar tarea "+t.title+" como "+(t.completed?"pendiente":"completada")),r(),c("for","task-"+t.id),P("aria-label","Marcar tarea "+t.title+" como "+(t.completed?"pendiente":"completada")),r(2),S("Marcar tarea ",t.title," como ",t.completed?"pendiente":"completada"),r(3),g(t.title),r(),f(t.description?9:-1),r(3),_("Creada: ",I(13,19,t.createdAt,"medium")),r(3),g(t.completed?"Completada":"Pendiente"),r(2),c("title",T("Editar tarea: ",t.title)),r(5),_("Editar tarea: ",t.title),r(),c("title",T("Eliminar tarea: ",t.title)),r(5),_("Eliminar tarea: ",t.title)}}function tt(l,o){l&1&&(i(0,"div",13),n(1,"El t\xEDtulo es requerido"),e())}function et(l,o){if(l&1){let t=O();i(0,"div",32)(1,"div",52)(2,"h2"),n(3,"Editar Tarea"),e(),i(4,"form",9),s("ngSubmit",function(){u(t);let d=m();return h(d.saveEdit())}),i(5,"div",10)(6,"label",53),n(7,"T\xEDtulo"),e(),b(8,"input",54),p(9,tt,2,0,"div",13),e(),i(10,"div",10)(11,"label",53),n(12,"Descripci\xF3n"),e(),b(13,"textarea",55),e(),i(14,"div",56)(15,"button",57),s("click",function(){u(t);let d=m();return h(d.cancelEdit())}),n(16,"Cancelar"),e(),i(17,"button",58),n(18,"Guardar"),e()()()()()}if(l&2){let t,a=m();r(4),c("formGroup",a.editForm),r(5),f((t=a.editForm.get("title"))!=null&&t.invalid&&((t=a.editForm.get("title"))!=null&&t.touched)?9:-1),r(8),c("disabled",!a.editForm.valid)}}var Q=class l{constructor(o,t,a){this.fb=o;this.router=t;this.ApiService=a;this.taskForm=this.fb.group({title:["",y.required],description:[""]}),this.editForm=this.fb.group({title:["",y.required],description:[""]})}taskForm;editForm;tasks=[];filteredTasks=[];editingTask=null;currentFilter="all";totalTasks=0;completedTasks=0;pendingTasks=0;ngOnInit(){this.loadTasks(),this.updateStats()}addTask(){if(this.taskForm.valid){let o={titulo:this.taskForm.value.title,description:this.taskForm.value.description,id_usuario:localStorage.getItem("id_usuario")};this.ApiService.saveTask(o).subscribe({next:t=>{let a={id:t.actividad.id_actividad,title:t.actividad.titulo,description:t.actividad.description,createdAt:new Date(t.actividad.createdAt??new Date),completed:!1};this.tasks.unshift(a),this.taskForm.reset(),this.applyFilter(),this.updateStats()},error:t=>{console.error("Error guardando tarea",t)}})}}toggleTask(o){let t=this.tasks.find(a=>a.id===o);t&&(t.completed=!t.completed,this.applyFilter(),this.updateStats())}editTask(o){this.editingTask=o,this.editForm.patchValue({title:o.title,description:o.description})}saveEdit(){this.editingTask&&this.editForm.valid&&(this.editingTask.title=this.editForm.value.title,this.editingTask.description=this.editForm.value.description,this.cancelEdit(),this.applyFilter())}cancelEdit(){this.editingTask=null,this.editForm.reset()}deleteTask(o){this.tasks=this.tasks.filter(t=>t.id!==o),this.applyFilter(),this.updateStats()}setFilter(o){this.currentFilter=o,this.applyFilter()}applyFilter(){switch(this.currentFilter){case"pending":this.filteredTasks=this.tasks.filter(o=>!o.completed);break;case"completed":this.filteredTasks=this.tasks.filter(o=>o.completed);break;default:this.filteredTasks=[...this.tasks]}}updateStats(){this.totalTasks=this.tasks.length,this.completedTasks=this.tasks.filter(o=>o.completed).length,this.pendingTasks=this.totalTasks-this.completedTasks}loadTasks(){this.tasks=[],this.applyFilter()}logout(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||l)(C(L),C(A),C(N))};static \u0275cmp=E({type:l,selectors:[["app-dashboard"]],decls:63,vars:14,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"dashboard-title"],["title","Cerrar sesi\xF3n",1,"btn","btn-logout",3,"click"],[1,"btn-text"],[1,"btn-icon"],[1,"dashboard-main"],[1,"dashboard-left"],[1,"task-form-section","glassmorphism"],[1,"task-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","taskTitle",1,"form-label"],["type","text","id","taskTitle","formControlName","title","placeholder","\xBFQu\xE9 necesitas hacer?","required","","aria-label","T\xEDtulo de la tarea",1,"form-input"],[1,"error-message"],["for","taskDescription",1,"form-label"],["id","taskDescription","formControlName","description","rows","3","placeholder","Detalles de la tarea...","aria-label","Descripci\xF3n de la tarea",1,"form-input"],["type","submit","aria-label","Agregar tarea",1,"login-button",3,"disabled"],[1,"dashboard-info","glassmorphism"],[1,"stats-container"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"filter-container"],["title","Mostrar todas las tareas",1,"filter-btn",3,"click"],["title","Mostrar tareas pendientes",1,"filter-btn",3,"click"],["title","Mostrar tareas completadas",1,"filter-btn",3,"click"],[1,"dashboard-right"],[1,"task-list-section"],[1,"task-list-title"],[1,"empty-state","glassmorphism"],[1,"task-list"],[1,"task-item","glassmorphism",3,"task-completed"],[1,"modal-overlay"],[1,"task-item","glassmorphism"],[1,"task-checkbox"],["type","checkbox",3,"change","id","checked"],[3,"for"],[1,"visually-hidden"],[1,"task-content"],[1,"task-title"],[1,"task-description"],[1,"task-meta"],[1,"task-date"],[1,"task-status"],[1,"task-actions"],[1,"btn-icon",3,"click","title"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","aria-hidden","true"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"btn-icon","btn-delete",3,"click","title"],["d","M3 6h18"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"modal","glassmorphism"],[1,"form-label"],["type","text","formControlName","title","required","","placeholder","T\xEDtulo de la tarea","aria-label","T\xEDtulo de la tarea",1,"form-input"],["formControlName","description","rows","3","placeholder","Descripci\xF3n de la tarea","aria-label","Descripci\xF3n de la tarea",1,"form-input"],[1,"modal-actions"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"login-button",3,"disabled"]],template:function(t,a){if(t&1&&(i(0,"div",0)(1,"header",1)(2,"h1",2),n(3,"Mi lista de tareas"),e(),i(4,"button",3),s("click",function(){return a.logout()}),i(5,"span",4),n(6,"Cerrar Sesi\xF3n"),e(),i(7,"span",5),n(8,"\u2192"),e()()(),i(9,"main",6)(10,"div",7)(11,"section",8)(12,"h2"),n(13,"Agregar nueva tarea"),e(),i(14,"form",9),s("ngSubmit",function(){return a.addTask()}),i(15,"div",10)(16,"label",11),n(17,"T\xEDtulo"),e(),b(18,"input",12),p(19,J,2,0,"div",13),e(),i(20,"div",10)(21,"label",14),n(22,"Descripci\xF3n (opcional)"),e(),b(23,"textarea",15),e(),i(24,"button",16),n(25," Agregar Tarea "),e()()(),i(26,"section",17)(27,"h3"),n(28,"Estad\xEDsticas"),e(),i(29,"div",18)(30,"div",19)(31,"span",20),n(32),e(),i(33,"span",21),n(34,"Total tareas"),e()(),i(35,"div",19)(36,"span",20),n(37),e(),i(38,"span",21),n(39,"Completadas"),e()(),i(40,"div",19)(41,"span",20),n(42),e(),i(43,"span",21),n(44,"Pendientes"),e()()(),i(45,"h3"),n(46,"Filtrar por"),e(),i(47,"div",22)(48,"button",23),s("click",function(){return a.setFilter("all")}),n(49," Todas "),e(),i(50,"button",24),s("click",function(){return a.setFilter("pending")}),n(51," Pendientes "),e(),i(52,"button",25),s("click",function(){return a.setFilter("completed")}),n(53," Completadas "),e()()()(),i(54,"div",26)(55,"section",27)(56,"h2",28),n(57,"Tus tareas"),e(),p(58,W,4,2,"div",29),i(59,"div",30),w(60,Z,29,22,"div",31,U),e()()()(),p(62,et,19,3,"div",32),e()),t&2){let d;r(14),c("formGroup",a.taskForm),r(5),f((d=a.taskForm.get("title"))!=null&&d.invalid&&((d=a.taskForm.get("title"))!=null&&d.touched)?19:-1),r(5),c("disabled",!a.taskForm.valid),r(8),g(a.totalTasks),r(5),g(a.completedTasks),r(5),g(a.pendingTasks),r(6),k("active",a.currentFilter==="all"),r(2),k("active",a.currentFilter==="pending"),r(2),k("active",a.currentFilter==="completed"),r(6),f(a.filteredTasks.length===0?58:-1),r(2),F(a.filteredTasks),r(2),f(a.editingTask?62:-1)}},dependencies:[z,Y,B,G,j,q,H,$,R,V],styles:['@charset "UTF-8";.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.dashboard-container[_ngcontent-%COMP%]{min-height:100vh;padding:2rem;background:linear-gradient(135deg,#212121,#000);color:#f5f5f5}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}@media (max-width: 768px){.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}}.dashboard-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin:0;color:#f5f5f5}.dashboard-main[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:2rem}@media (max-width: 1024px){.dashboard-main[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr;gap:1.5rem}}@media (max-width: 768px){.dashboard-main[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}}.dashboard-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}@media (max-width: 768px){.dashboard-left[_ngcontent-%COMP%]{order:2}}@media (max-width: 768px){.dashboard-right[_ngcontent-%COMP%]{order:1}}.btn[_ngcontent-%COMP%], .btn-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem 1.2rem;border-radius:8px;border:none;font-size:.95rem;font-weight:500;cursor:pointer;transition:all .2s ease}.btn[_ngcontent-%COMP%]:focus, .btn-icon[_ngcontent-%COMP%]:focus{outline:3px solid rgba(255,255,255,.06)}.btn-logout[_ngcontent-%COMP%]{background:#ef444433;color:#f5f5f5}.btn-logout[_ngcontent-%COMP%]:hover{background:#ef44444d}.btn-icon[_ngcontent-%COMP%]{padding:.5rem;background:transparent;color:#e0e0e0;position:relative}.btn-icon[_ngcontent-%COMP%]:hover{background:#ffffff0d;color:#f5f5f5}.btn-delete[_ngcontent-%COMP%]:hover{color:#ef4444}.task-form-section[_ngcontent-%COMP%]{background:#ffffff14;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);box-shadow:0 10px 30px -10px #0009;border-radius:12px;padding:1.5rem;animation:_ngcontent-%COMP%_fadeIn .4s ease}.task-form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;font-size:1.5rem;color:#f5f5f5}.task-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{color:#e0e0e0;margin-bottom:.5rem;font-weight:500;font-size:.95rem}.form-input[_ngcontent-%COMP%]{background:#ffffff0a;border:1px solid rgba(255,255,255,.06);border-radius:8px;padding:.72rem 1rem;color:#f5f5f5;font-size:.98rem;transition:all .18s ease;width:100%;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:3px solid rgba(255,255,255,.06);border-color:#e0e0e0;box-shadow:0 4px 18px #00000073}.form-input.invalid[_ngcontent-%COMP%]{border-color:#bdbdbd;background:#ffffff08}.form-input[_ngcontent-%COMP%]::placeholder{color:#e0e0e099}.login-button[_ngcontent-%COMP%]{background:linear-gradient(180deg,#424242,#616161);color:#f5f5f5;border:none;border-radius:8px;padding:.78rem;font-size:1rem;font-weight:700;cursor:pointer;transition:transform .12s ease,opacity .12s ease;margin-top:.5rem}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.login-button[_ngcontent-%COMP%]:focus{outline:3px solid rgba(255,255,255,.06)}.login-button[_ngcontent-%COMP%]:disabled{background:#757575;cursor:not-allowed;opacity:.7}.dashboard-info[_ngcontent-%COMP%]{background:#ffffff14;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);box-shadow:0 10px 30px -10px #0009;border-radius:12px;padding:1.5rem;display:flex;flex-direction:column;gap:1.5rem}.dashboard-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#f5f5f5;font-size:1.2rem}.stats-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:1rem}@media (max-width: 1024px){.stats-container[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.stat-number[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#f5f5f5}.stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:#bdbdbd;margin-top:.25rem}.filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}@media (max-width: 1024px){.filter-container[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}}@media (max-width: 480px){.filter-container[_ngcontent-%COMP%]{flex-direction:column}}.filter-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:6px;border:1px solid rgba(255,255,255,.1);background:#ffffff0d;color:#e0e0e0;cursor:pointer;transition:all .2s ease;text-align:center}.filter-btn[_ngcontent-%COMP%]:hover, .filter-btn.active[_ngcontent-%COMP%]{background:#ffffff1a;color:#f5f5f5}.filter-btn.active[_ngcontent-%COMP%]{border-color:#fff3}.task-list-section[_ngcontent-%COMP%]   .task-list-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;color:#f5f5f5}.empty-state[_ngcontent-%COMP%]{background:#ffffff14;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);box-shadow:0 10px 30px -10px #0009;border-radius:12px;padding:3rem 2rem;text-align:center;color:#bdbdbd}.task-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-height:calc(100vh - 200px);overflow-y:auto;padding-right:.5rem}.task-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.task-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:3px}.task-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.task-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.task-item[_ngcontent-%COMP%]{background:#ffffff14;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);box-shadow:0 10px 30px -10px #0009;border-radius:12px;padding:1.25rem;display:flex;align-items:flex-start;gap:1rem;transition:all .2s ease;animation:_ngcontent-%COMP%_fadeIn .4s ease}.task-item[_ngcontent-%COMP%]:hover{box-shadow:0 15px 35px -15px #000000b3}.task-item.task-completed[_ngcontent-%COMP%]{opacity:.7}.task-item.task-completed[_ngcontent-%COMP%]   .task-title[_ngcontent-%COMP%]{text-decoration:line-through}.task-checkbox[_ngcontent-%COMP%]{position:relative;margin-top:.25rem}.task-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}.task-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background:#e0e0e0;border-color:#e0e0e0}.task-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1}.task-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;padding-left:28px;cursor:pointer}.task-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:20px;height:20px;border:2px solid #9e9e9e;border-radius:4px;transition:all .2s ease}.task-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;left:5px;top:0;color:#212121;opacity:0;transition:opacity .2s ease}.task-content[_ngcontent-%COMP%]{flex:1}.task-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0 0 .5rem;color:#f5f5f5}.task-description[_ngcontent-%COMP%]{margin:0 0 .75rem;color:#e0e0e0;line-height:1.5}.task-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.85rem;color:#9e9e9e}@media (max-width: 480px){.task-meta[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}}.task-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);display:flex;justify-content:center;align-items:center;z-index:1000;padding:1rem}.modal[_ngcontent-%COMP%]{background:#ffffff14;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);box-shadow:0 10px 30px -10px #0009;border-radius:12px;padding:2rem;width:100%;max-width:500px}.modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:#f5f5f5}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem}.btn-cancel[_ngcontent-%COMP%]{background:#ffffff0d;color:#e0e0e0}.btn-cancel[_ngcontent-%COMP%]:hover{background:#ffffff1a}.error-message[_ngcontent-%COMP%]{color:#f87171;font-size:.85rem;margin-top:.5rem}']})};export{Q as DashboardComponent};
